import type { GameJson } from "$lib/types";

const template: GameJson = {
  validator: {
    regions: {
      europe: {
        $or: [...Array(0xa).keys()].map((index) => ({
          [index * 0x1000]: [0x50, 0x49, 0x52, 0x4f], // "PIRO"
        })),
      },
      usa_japan: {
        $or: [...Array(0xa).keys()].map((index) => ({
          [index * 0x1000]: [0x50, 0x49, 0x52, 0x4f], // "PIRO"
        })),
      },
    },
    text: "Drag 'n' drop here or click to add a save file.",
    error: "Not a valid save file.",
  },
  items: [
    {
      type: "section",
      flex: true,
      hidden: true,
      items: [
        {
          name: "Checksum",
          offset: 0x42c,
          type: "checksum",
          dataType: "uint32",
          control: {
            offsetStart: 0x0,
            offsetEnd: 0x42c,
          },
        },
        {
          name: "Magic",
          offset: 0x0,
          length: 0x4,
          type: "variable",
          dataType: "string",
          letterDataType: "uint8",
          hidden: true,
        },
      ],
    },
    {
      type: "tabs",
      items: [
        {
          name: "Story",
          items: [
            {
              type: "section",
              flex: true,
              items: [
                {
                  name: "Game Clear",
                  offset: 0x424,
                  type: "variable",
                  dataType: "bit",
                  bit: 0,
                  hidden: true,
                },
                {
                  id: "progression",
                  name: "Sonic",
                  offset: 0x8,
                  type: "variable",
                  dataType: "uint16",
                  resource: "sonicProgressions",
                  autocomplete: true,
                },
                {
                  name: "Tails",
                  offset: 0xa,
                  type: "variable",
                  dataType: "uint16",
                  resource: "othersProgressions",
                  autocomplete: true,
                },
                {
                  name: "Knuckles",
                  offset: 0xc,
                  type: "variable",
                  dataType: "uint16",
                  resource: "othersProgressions",
                  autocomplete: true,
                },
                {
                  name: "Amy",
                  offset: 0xe,
                  type: "variable",
                  dataType: "uint16",
                  resource: "othersProgressions",
                  autocomplete: true,
                },
              ],
            },
            {
              name: "Chaos Emeralds",
              type: "bitflags",
              flags: [
                { offset: 0x1d, bit: 0, label: "Red" },
                { offset: 0x1d, bit: 1, label: "Blue" },
                { offset: 0x1d, bit: 2, label: "Yellow" },
                { offset: 0x1d, bit: 3, label: "Green" },
                { offset: 0x1d, bit: 4, label: "White" },
                { offset: 0x1d, bit: 5, label: "Cyan" },
                { offset: 0x1d, bit: 6, label: "Purple" },
              ],
            },
          ],
        },
        {
          name: "VS",
          items: [
            {
              type: "section",
              flex: true,
              items: [
                {
                  name: "Name",
                  offset: 0x10,
                  length: 0x6,
                  type: "variable",
                  dataType: "string",
                  letterDataType: "uint8",
                  fallback: 0x20,
                  resource: "letters",
                  test: true,
                },
                {
                  name: "ID",
                  offset: 0x4,
                  type: "variable",
                  dataType: "uint32",
                  hidden: true,
                },
                {
                  name: "Total Wins",
                  offset: 0x425,
                  type: "variable",
                  dataType: "uint8",
                  max: 99,
                },
                {
                  name: "Total Losses",
                  offset: 0x426,
                  type: "variable",
                  dataType: "uint8",
                  max: 99,
                },
              ],
            },
            {
              length: 0x10,
              type: "container",
              instanceType: "section",
              instances: 10,
              flex: true,
              noMargin: true,
              items: [
                {
                  name: "Name",
                  offset: 0x384,
                  length: 0x6,
                  type: "variable",
                  dataType: "string",
                  letterDataType: "uint8",
                  fallback: 0x20,
                  resource: "letters",
                },
                {
                  name: "ID",
                  offset: 0x380,
                  type: "variable",
                  dataType: "uint32",
                  hidden: true,
                },
                {
                  id: "vsResult-0",
                  name: "Wins",
                  offset: 0x38c,
                  type: "variable",
                  dataType: "uint8",
                  max: 99,
                },
                {
                  id: "vsResult-1",
                  name: "Losses",
                  offset: 0x38d,
                  type: "variable",
                  dataType: "uint8",
                  max: 99,
                },
                {
                  id: "vsResult-2",
                  name: "Draws",
                  offset: 0x38e,
                  type: "variable",
                  dataType: "uint8",
                  max: 99,
                },
              ],
            },
          ],
        },
        {
          name: "Time Attack",
          items: [
            {
              length: 0xd8,
              type: "container",
              instanceType: "tabs",
              instances: 4,
              resource: "characters",
              items: [
                {
                  length: 0x18,
                  type: "container",
                  instanceType: "tabs",
                  instances: 6,
                  resource: "zones",
                  vertical: true,
                  items: [
                    {
                      length: 0xc,
                      type: "container",
                      instanceType: "section",
                      instances: 2,
                      resource: "acts",
                      flex: true,
                      items: [
                        {
                          name: "1st Place",
                          type: "group",
                          mode: "chrono",
                          items: [
                            {
                              id: "time",
                              offset: 0x20,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "minutes",
                                  },
                                },
                                { round: 0 },
                              ],
                              max: 9,
                            },
                            {
                              id: "time",
                              offset: 0x20,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "seconds",
                                  },
                                },
                                { round: 0 },
                              ],
                              leadingZeros: 1,
                              max: 59,
                            },
                            {
                              id: "time",
                              offset: 0x20,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "milliseconds",
                                  },
                                },
                                { round: 0 },
                              ],
                              leadingZeros: 2,
                              max: 990,
                              step: 100,
                            },
                          ],
                        },
                        {
                          name: "2nd Place",
                          type: "group",
                          mode: "chrono",
                          items: [
                            {
                              id: "time",
                              offset: 0x24,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "minutes",
                                  },
                                },
                                { round: 0 },
                              ],
                              max: 9,
                            },
                            {
                              id: "time",
                              offset: 0x24,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "seconds",
                                  },
                                },
                                { round: 0 },
                              ],
                              leadingZeros: 1,
                              max: 59,
                            },
                            {
                              id: "time",
                              offset: 0x24,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "milliseconds",
                                  },
                                },
                                { round: 0 },
                              ],
                              leadingZeros: 2,
                              max: 990,
                              step: 100,
                            },
                          ],
                        },
                        {
                          name: "3rd Place",
                          type: "group",
                          mode: "chrono",
                          items: [
                            {
                              id: "time",
                              offset: 0x28,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "minutes",
                                  },
                                },
                                { round: 0 },
                              ],
                              max: 9,
                            },
                            {
                              id: "time",
                              offset: 0x28,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "seconds",
                                  },
                                },
                                { round: 0 },
                              ],
                              leadingZeros: 1,
                              max: 59,
                            },
                            {
                              id: "time",
                              offset: 0x28,
                              type: "variable",
                              dataType: "uint32",
                              operations: [
                                { "*": 16.666666667 },
                                {
                                  convert: {
                                    from: "milliseconds",
                                    to: "milliseconds",
                                  },
                                },
                                { round: 0 },
                              ],
                              leadingZeros: 2,
                              max: 990,
                              step: 100,
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
        {
          name: "Tiny Chao Garden",
          items: [
            {
              name: "Obtained Rings",
              offset: 0x428,
              type: "variable",
              dataType: "uint32",
              max: 99999,
            },
          ],
        },
        {
          name: "Options",
          flex: true,
          items: [
            {
              name: "Level",
              offset: 0x18,
              type: "variable",
              dataType: "uint8",
              resource: "levels",
            },
            {
              id: "option",
              name: "Time Up",
              offset: 0x1b,
              type: "variable",
              dataType: "uint8",
              resource: "optionBooleanReversed",
            },
            {
              id: "language-menus",
              name: "Language Menus (Europe)",
              offset: 0x19,
              type: "variable",
              dataType: "uint8",
              hidden: true,
            },
            {
              id: "language-chaos",
              name: "Language",
              offset: 0x1a,
              type: "variable",
              dataType: "uint8",
              resource: "languages",
            },
            {
              id: "option",
              name: "Button Config.",
              offset: 0x1c,
              type: "variable",
              dataType: "uint8",
              resource: "buttonConfigs",
            },
          ],
        },
      ],
    },
  ],
  resources: {
    acts: {
      0x0: "Act 1",
      0x1: "Act 2",
    },
    buttonConfigs: {
      0x0: "Normal",
      0x1: "Reverse",
    },
    characters: {
      0x0: "Sonic",
      0x1: "Tails",
      0x2: "Knuckles",
      0x3: "Amy",
    },
    languages: [
      // Europe
      {
        0x0: "Japanese",
        0x1: "English",
        0x2: "French",
        0x3: "German",
        0x4: "Spanish",
      },
      // USA / Japan
      {
        0x0: "Japanese",
        0x1: "English",
      },
    ],
    letters: {
      0x20: " ",
      0x21: "!",
      0x26: "&",
      0x2c: ",",
      0x2e: ".",
      0x2d: "-",
      0x30: "0",
      0x31: "1",
      0x32: "2",
      0x33: "3",
      0x34: "4",
      0x35: "5",
      0x36: "6",
      0x37: "7",
      0x38: "8",
      0x39: "9",
      0x3f: "?",
      0x40: "@",
      0x41: "A",
      0x42: "B",
      0x43: "C",
      0x44: "D",
      0x45: "E",
      0x46: "F",
      0x47: "G",
      0x48: "H",
      0x49: "I",
      0x4a: "J",
      0x4b: "K",
      0x4c: "L",
      0x4d: "M",
      0x4e: "N",
      0x4f: "O",
      0x50: "P",
      0x51: "Q",
      0x52: "R",
      0x53: "S",
      0x54: "T",
      0x55: "U",
      0x56: "V",
      0x57: "W",
      0x58: "X",
      0x59: "Y",
      0x5a: "Z",
      0x61: "★",
      0x62: "♥",
      0x63: "♠",
      0x64: "♦",
      0x65: "♣",
      0x66: "♪",
      0x6a: "·",
      0x70: "a",
      0x71: "b",
      0x72: "c",
      0x73: "d",
      0x74: "e",
      0x75: "f",
      0x76: "g",
      0x77: "h",
      0x78: "i",
      0x79: "j",
      0x7a: "k",
      0x7b: "l",
      0x7c: "m",
      0x7d: "n",
      0x7e: "o",
      0x7f: "p",
      0x80: "q",
      0x81: "r",
      0x82: "s",
      0x83: "t",
      0x84: "u",
      0x85: "v",
      0x86: "w",
      0x87: "x",
      0x88: "y",
      0x89: "z",
    },
    levels: {
      0x0: "Normal",
      0x1: "Easy",
    },
    optionBooleanReversed: {
      0x0: "On",
      0x1: "Off",
    },
    othersProgressions: {
      0x0: "Zone 1-1",
      0x1: "Zone 1-2",
      0x2: "Zone 2-1",
      0x3: "Zone 2-2",
      0x4: "Zone 3-1",
      0x5: "Zone 3-2",
      0x6: "Zone 4-1",
      0x7: "Zone 4-2",
      0x8: "Zone 5-1",
      0x9: "Zone 5-2",
      0xa: "Zone 6-1",
      0xb: "Zone 6-2",
      0xc: "Final Zone",
      0xd: "Final Zone Clear",
    },
    sonicProgressions: {
      0x0: "Zone 1-1",
      0x1: "Zone 1-2",
      0x2: "Zone 2-1",
      0x3: "Zone 2-2",
      0x4: "Zone 3-1",
      0x5: "Zone 3-2",
      0x6: "Zone 4-1",
      0x7: "Zone 4-2",
      0x8: "Zone 5-1",
      0x9: "Zone 5-2",
      0xa: "Zone 6-1",
      0xb: "Zone 6-2",
      0xc: "Final Zone",
      0xd: "Final Zone Clear",
      0xe: "Moon Zone",
      0xf: "Moon Zone Clear",
    },
    zones: {
      0x0: "Zone 1: Neo Green Hill",
      0x1: "Zone 2: Secret Base",
      0x2: "Zone 3: Casino Paradise",
      0x3: "Zone 4: Ice Mountain",
      0x4: "Zone 5: Angel Island",
      0x5: "Zone 6: Egg Rocket",
    },
  },
  resourcesLabels: {
    othersProgressions: {
      0x0: "Zone 1: Neo Green Hill",
      0x2: "Zone 2: Secret Base",
      0x4: "Zone 3: Casino Paradise",
      0x6: "Zone 4: Ice Mountain",
      0x8: "Zone 5: Angel Island",
      0xa: "Zone 6: Egg Rocket",
      0xc: "Final Zone",
    },
    sonicProgressions: {
      0x0: "Zone 1: Neo Green Hill",
      0x2: "Zone 2: Secret Base",
      0x4: "Zone 3: Casino Paradise",
      0x6: "Zone 4: Ice Mountain",
      0x8: "Zone 5: Angel Island",
      0xa: "Zone 6: Egg Rocket",
      0xc: "Final Zone",
      0xe: "Moon Zone",
    },
  },
};

export default template;
