import type { GameJson } from "$lib/types";

import { timeFragment } from "./resource/fragment";

const template: GameJson = {
  validator: {
    regions: {
      europe_japan: {
        0x0: [
          0x4b, 0x55, 0x52, 0x55, 0x52, 0x49, 0x4e, 0x20, 0x31, 0x2e, 0x30,
          0x31,
        ], // "KURURIN 1.01"
      },
    },
    text: "Drag 'n' drop here or click to add a save file.",
    error: "Not a valid save file.",
  },
  items: [
    {
      type: "section",
      flex: true,
      hidden: true,
      items: [
        {
          name: "Section",
          offset: 0x10,
          type: "variable",
          dataType: "uint8",
          hidden: true,
        },
        {
          name: "Checksum Section 1",
          offset: 0x12,
          type: "checksum",
          dataType: "uint16",
          control: {
            offsetStart: 0x18,
            offsetEnd: 0x226b,
          },
        },
        {
          name: "Checksum Section 2",
          offset: 0x14,
          type: "checksum",
          dataType: "uint16",
          control: {
            offsetStart: 0x226c,
            offsetEnd: 0x44c0,
          },
        },
      ],
    },
    {
      id: "slots",
      length: 0x1f4,
      type: "container",
      instanceType: "tabs",
      instances: 5,
      enumeration: "Slot %d",
      items: [
        {
          type: "tabs",
          items: [
            {
              name: "General",
              items: [
                {
                  type: "section",
                  flex: true,
                  items: [
                    {
                      name: "Name",
                      offset: 0x1a,
                      length: 0x8,
                      type: "variable",
                      dataType: "string",
                      letterDataType: "uint8",
                      fallback: 0x20,
                      endCode: 0x0,
                      resource: "letters",
                      test: true,
                    },
                    {
                      name: "Rank",
                      offset: 0x25,
                      type: "variable",
                      dataType: "uint8",
                      resource: "ranks",
                    },
                    {
                      name: "Difficulty",
                      offset: 0x28,
                      type: "variable",
                      dataType: "bit",
                      bit: 4,
                      resource: "difficulties",
                    },
                  ],
                },
                {
                  name: "Miscellaneous",
                  type: "bitflags",
                  flags: [
                    { offset: 0x28, bit: 1, label: "<b>Adventure:</b> The Last Land unlocked" },
                    { offset: 0x28, bit: 2, label: "<b>Challenge:</b> Level 11 unlocked" },
                    { offset: 0x28, bit: 0, label: "Adventure: Introduction seen", hidden: true },
                    { offset: 0x28, bit: 3, label: "Adventure: Difficulty selected", hidden: true },
                    { offset: 0x28, bit: 5, label: "Adventure completed with all siblings", hidden: true },
                    { offset: 0x28, bit: 6, label: "Adventure completed without all siblings", hidden: true },
                  ],
                },
              ],
            },
            {
              name: "Adventure",
              items: [
                {
                  id: "adventure-slot",
                  length: 0xc,
                  type: "container",
                  instanceType: "tabs",
                  instances: 12,
                  resource: "worlds",
                  vertical: true,
                  items: [
                    {
                      id: "adventureLevels-%index%",
                      length: 0x4,
                      type: "container",
                      instanceType: "section",
                      instances: 3,
                      flex: true,
                      noMargin: true,
                      items: [
                        {
                          id: "status-adventure-%parent%-%index%",
                          name: "Status",
                          offset: 0x1ac,
                          type: "variable",
                          dataType: "uint8",
                          resource: "adventureStatus",
                          overrideShift: {
                            parent: 2,
                            shift: 0x1,
                          },
                        },
                        timeFragment(0x38),
                      ],
                    },
                  ],
                },
              ],
            },
            {
              name: "Challenge",
              items: [
                {
                  length: 0x14,
                  type: "container",
                  instanceType: "tabs",
                  instances: 11,
                  enumeration: "Level %d",
                  vertical: true,
                  items: [
                    {
                      length: 0x4,
                      type: "container",
                      instanceType: "section",
                      instances: 5,
                      flex: true,
                      noMargin: true,
                      items: [
                        {
                          id: "status-challenge-%parent%-%index%",
                          name: "Challenge %d",
                          offset: 0x1d2,
                          type: "variable",
                          dataType: "uint8",
                          resource: "challengeStatus",
                          overrideShift: {
                            parent: 2,
                            shift: 0x1,
                          },
                        },
                        timeFragment(0xd0),
                      ],
                    },
                  ],
                },
              ],
            },
            {
              name: "Make Up",
              items: [
                {
                  type: "tabs",
                  vertical: true,
                  items: [
                    {
                      name: "Parts",
                      flex: true,
                      items: [
                        {
                          id: "makeUp-parts-unlocked-%index%",
                          name: "Unlocked",
                          type: "bitflags",
                          flags: [
                            { offset: 0x2e, bit: 1, label: "Straight" },
                            { offset: 0x2e, bit: 2, label: "Wavy" },
                            { offset: 0x2e, bit: 3, label: "Bicolor" },
                            { offset: 0x2e, bit: 4, label: "Stripped" },
                            { offset: 0x2e, bit: 5, label: "Thorns" },
                            { offset: 0x2e, bit: 6, label: "Hearts" },
                            { offset: 0x2e, bit: 7, label: "Flowers 1" },
                            { offset: 0x2f, bit: 0, label: "Chains" },
                            { offset: 0x2f, bit: 1, label: "Balls" },
                            { offset: 0x2f, bit: 2, label: "Stars 1" },
                            { offset: 0x2f, bit: 3, label: "Stars 2" },
                            { offset: 0x2f, bit: 4, label: "Snake" },
                            { offset: 0x2f, bit: 5, label: "Swords" },
                            { offset: 0x2f, bit: 6, label: "Arrow" },
                            { offset: 0x2f, bit: 7, label: "Flowers 2" },
                          ],
                        },
                        {
                          id: "makeUp-parts-levels-%index%",
                          name: "Levels",
                          type: "bitflags",
                          hidden: true,
                          flags: [
                            { offset: 0x2e, bit: 1, label: "Init", disabled: true },
                            { offset: 0x34, bit: 1, label: "Grasslands 2 (Wavy)" },
                            { offset: 0x34, bit: 4, label: "Ocean 2 (Bicolor)" },
                            { offset: 0x34, bit: 7, label: "Jungle 2 (Stripped)" },
                            { offset: 0x35, bit: 2, label: "Cake Land 2 (Thorns)" },
                            { offset: 0x35, bit: 5, label: "Cave 2 (Hearts)" },
                            { offset: 0x36, bit: 0, label: "Cloud Land 2 (Flowers 1)" },
                            { offset: 0x36, bit: 2, label: "Star Land 1 (Chains)" },
                            { offset: 0x36, bit: 3, label: "Star Land 2 (Balls)" },
                            { offset: 0x36, bit: 5, label: "Ice Land 1 (Stars 1)" },
                            { offset: 0x36, bit: 6, label: "Ice Land 2 (Stars 2)" },
                            { offset: 0x37, bit: 0, label: "Machine Land 1 (Snake)" },
                            { offset: 0x37, bit: 1, label: "Machine Land 2 (Swords)" },
                            { offset: 0x37, bit: 3, label: "Ghost Castle 1 (Arrow)" },
                            { offset: 0x37, bit: 4, label: "Ghost Castle 2 (Flowers 2)" },
                          ],
                        },
                        {
                          name: "Equipped",
                          offset: 0x30,
                          type: "variable",
                          dataType: "uint8",
                          resource: "parts",
                        },
                      ],
                    },
                    {
                      name: "Paints",
                      flex: true,
                      items: [
                        {
                          id: "makeUp-paints-unlocked-%index%",
                          name: "Unlocked",
                          type: "bitflags",
                          flags: [
                            { offset: 0x2d, bit: 2, label: "Light Blue / Yellow" },
                            { offset: 0x2d, bit: 3, label: "Yellow / Purple" },
                            { offset: 0x2d, bit: 4, label: "Red / Light Blue" },
                            { offset: 0x2d, bit: 5, label: "Blue / Yellow" },
                            { offset: 0x2d, bit: 6, label: "Green / Blue" },
                            { offset: 0x2d, bit: 7, label: "Blinking Red" },
                            { offset: 0x2e, bit: 0, label: "Blinking Rainbow" },
                          ],
                        },
                        {
                          id: "makeUp-paints-levels-%index%",
                          name: "Levels",
                          type: "bitflags",
                          hidden: true,
                          flags: [
                            { offset: 0x2d, bit: 2, label: "Init", disabled: true },
                            { offset: 0x34, bit: 0, label: "Grasslands 1 (Purple)" },
                            { offset: 0x34, bit: 3, label: "Ocean 1 (Red/Light Blue)" },
                            { offset: 0x34, bit: 6, label: "Jungle 1 (Blue/Yellow)" },
                            { offset: 0x35, bit: 1, label: "Cake Land 1 (Green/Blue)" },
                            { offset: 0x35, bit: 4, label: "Cave 1 (Red/Black)" },
                            { offset: 0x35, bit: 7, label: "Cloud Land 1 (Yellow/Green)" },
                          ],
                        },
                        {
                          name: "Equipped",
                          offset: 0x31,
                          type: "variable",
                          dataType: "uint8",
                          resource: "paints",
                        },
                      ],
                    },
                    {
                      name: "Siblings",
                      flex: true,
                      items: [
                        {
                          id: "makeUp-siblings-unlocked-%index%",
                          name: "Unlocked",
                          type: "bitflags",
                          flags: [
                            { offset: 0x2c, bit: 0, label: "Chikurin" },
                            { offset: 0x2c, bit: 1, label: "Hoyorin" },
                            { offset: 0x2c, bit: 2, label: "Gizarin" },
                            { offset: 0x2c, bit: 3, label: "Loverin" },
                            { offset: 0x2c, bit: 4, label: "Gekirin" },
                            { offset: 0x2c, bit: 5, label: "Fuwarin" },
                            { offset: 0x2c, bit: 6, label: "Maririn" },
                            { offset: 0x2c, bit: 7, label: "Pokorin" },
                            { offset: 0x2d, bit: 0, label: "Hikarin" },
                            { offset: 0x2d, bit: 1, label: "Hyokorin" },
                          ],
                        },
                        {
                          id: "makeUp-siblings-levels-%index%",
                          name: "Levels",
                          type: "bitflags",
                          hidden: true,
                          flags: [
                            { offset: 0x34, bit: 2, label: "Grasslands 3 (Chikurin)" },
                            { offset: 0x34, bit: 5, label: "Ocean 3 (Hoyorin)" },
                            { offset: 0x35, bit: 0, label: "Jungle 3 (Gizarin)" },
                            { offset: 0x35, bit: 3, label: "Cake Land 3 (Loverin)" },
                            { offset: 0x35, bit: 6, label: "Cave 3 (Gekirin)" },
                            { offset: 0x36, bit: 1, label: "Cloud Land 3 (Fuwarin)" },
                            { offset: 0x36, bit: 4, label: "Star Land 3 (Maririn)" },
                            { offset: 0x36, bit: 7, label: "Ice Land 3 (Pokorin)" },
                            { offset: 0x37, bit: 2, label: "Machine Land 3 (Hikarin)" },
                            { offset: 0x37, bit: 5, label: "Ghost Castle 3 (Hyokorin)" },
                          ],
                        },
                        {
                          name: "Equipped",
                          type: "bitflags",
                          flags: [
                            { offset: 0x32, bit: 0, label: "Chikurin" },
                            { offset: 0x32, bit: 1, label: "Hoyorin" },
                            { offset: 0x32, bit: 2, label: "Gizarin" },
                            { offset: 0x32, bit: 3, label: "Loverin" },
                            { offset: 0x32, bit: 4, label: "Gekirin" },
                            { offset: 0x32, bit: 5, label: "Fuwarin" },
                            { offset: 0x32, bit: 6, label: "Maririn" },
                            { offset: 0x32, bit: 7, label: "Pokorin" },
                            { offset: 0x33, bit: 0, label: "Hikarin" },
                            { offset: 0x33, bit: 1, label: "Hyokorin" },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
      appendSubinstance: [
        {
          name: "Records",
          items: [
            {
              type: "tabs",
              items: [
                {
                  name: "Adventure (Normal)",
                  items: [
                    {
                      id: "adventure-records",
                      length: 0x90,
                      type: "container",
                      instanceType: "tabs",
                      instances: 12,
                      resource: "worlds",
                      vertical: true,
                      items: [
                        {
                          id: "adventureLevels-%index%",
                          length: 0x30,
                          type: "container",
                          instanceType: "tabs",
                          instances: 3,
                          vertical: true,
                          items: [
                            {
                              length: 0x10,
                              type: "container",
                              instanceType: "section",
                              instances: 3,
                              enumeration: "%o Place",
                              flex: true,
                              items: [
                                {
                                  id: "nameRecords",
                                  name: "Name",
                                  offset: 0x9e0,
                                  length: 0x8,
                                  type: "variable",
                                  dataType: "string",
                                  letterDataType: "uint8",
                                  fallback: 0x20,
                                  endCode: 0x0,
                                  resource: "letters",
                                },
                                {
                                  name: "Rank",
                                  offset: 0x9eb,
                                  type: "variable",
                                  dataType: "uint8",
                                  resource: "ranks",
                                },
                                timeFragment(0x9dc),
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
                {
                  name: "Adventure (Easy)",
                  items: [
                    {
                      id: "adventure-records",
                      length: 0x90,
                      type: "container",
                      instanceType: "tabs",
                      instances: 12,
                      resource: "worlds",
                      vertical: true,
                      items: [
                        {
                          id: "adventureLevels-%index%",
                          length: 0x30,
                          type: "container",
                          instanceType: "tabs",
                          instances: 3,
                          vertical: true,
                          items: [
                            {
                              length: 0x10,
                              type: "container",
                              instanceType: "section",
                              instances: 3,
                              enumeration: "%o Place",
                              flex: true,
                              items: [
                                {
                                  id: "nameRecords",
                                  name: "Name",
                                  offset: 0x1b50,
                                  length: 0x8,
                                  type: "variable",
                                  dataType: "string",
                                  letterDataType: "uint8",
                                  fallback: 0x20,
                                  endCode: 0x0,
                                  resource: "letters",
                                },
                                {
                                  name: "Rank",
                                  offset: 0x1b5b,
                                  type: "variable",
                                  dataType: "uint8",
                                  resource: "ranks",
                                },
                                timeFragment(0x1b4c),
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
                {
                  name: "Challenge",
                  items: [
                    {
                      length: 0xf0,
                      type: "container",
                      instanceType: "tabs",
                      instances: 11,
                      enumeration: "Level %d",
                      vertical: true,
                      items: [
                        {
                          length: 0x30,
                          type: "container",
                          instanceType: "tabs",
                          instances: 5,
                          enumeration: "Challenge %d",
                          vertical: true,
                          items: [
                            {
                              length: 0x10,
                              type: "container",
                              instanceType: "section",
                              instances: 3,
                              enumeration: "%o Place",
                              flex: true,
                              items: [
                                {
                                  name: "Name",
                                  offset: 0x1100,
                                  length: 0x8,
                                  type: "variable",
                                  dataType: "string",
                                  letterDataType: "uint8",
                                  fallback: 0x20,
                                  endCode: 0x0,
                                  resource: "letters",
                                },
                                {
                                  name: "Rank",
                                  offset: 0x110b,
                                  type: "variable",
                                  dataType: "uint8",
                                  resource: "ranks",
                                },
                                timeFragment(0x10fc),
                              ],
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
    },
  ],
  resources: {
    adventureStatus: {
      0x0: "-",
      0x1: "Available",
      0x3: "Cleared",
      0x4: "Perfect",
    },
    challengeStatus: {
      0x0: "-",
      0x3: "Cleared",
      0x4: "Perfect",
    },
    difficulties: {
      0x0: "Normal",
      0x1: "Easy",
    },
    letters: {
      0x20: " ",
      0x21: "!",
      0x24: "$",
      0x25: "%",
      0x26: "&",
      0x27: "'",
      0x28: "(",
      0x29: ")",
      0x2a: "＊",
      0x2b: "+",
      0x2c: ",",
      0x2d: "-",
      0x2e: ".",
      0x2f: "/",
      0x30: "0",
      0x31: "1",
      0x32: "2",
      0x33: "3",
      0x34: "4",
      0x35: "5",
      0x36: "6",
      0x37: "7",
      0x38: "8",
      0x39: "9",
      0x3a: ":",
      0x3b: ";",
      0x3c: "<",
      0x3d: "=",
      0x3e: ">",
      0x40: "@",
      0x41: "A",
      0x42: "B",
      0x43: "C",
      0x44: "D",
      0x45: "E",
      0x46: "F",
      0x47: "G",
      0x48: "H",
      0x49: "I",
      0x4a: "J",
      0x4b: "K",
      0x4c: "L",
      0x4d: "M",
      0x4e: "N",
      0x4f: "O",
      0x50: "P",
      0x51: "Q",
      0x52: "R",
      0x53: "S",
      0x54: "T",
      0x55: "U",
      0x56: "V",
      0x57: "W",
      0x58: "X",
      0x59: "Y",
      0x5a: "Z",
      0x5c: "¥",
      0x5e: "^",
      0x61: "a",
      0x62: "b",
      0x63: "c",
      0x64: "d",
      0x65: "e",
      0x66: "f",
      0x67: "g",
      0x68: "h",
      0x69: "i",
      0x6a: "j",
      0x6b: "k",
      0x6c: "l",
      0x6d: "m",
      0x6e: "n",
      0x6f: "o",
      0x70: "p",
      0x71: "q",
      0x72: "r",
      0x73: "s",
      0x74: "t",
      0x75: "u",
      0x76: "v",
      0x77: "w",
      0x78: "x",
      0x79: "y",
      0x7a: "z",
      0x7e: "~",
      0x86: "を",
      0x87: "ぁ",
      0x88: "ぃ",
      0x89: "ぅ",
      0x8a: "ぇ",
      0x8b: "ぉ",
      0x8c: "ゃ",
      0x8d: "ゅ",
      0x8e: "ょ",
      0x8f: "っ",
      0x91: "あ",
      0x92: "い",
      0x93: "う",
      0x94: "え",
      0x95: "お",
      0x96: "か",
      0x97: "き",
      0x98: "く",
      0x99: "け",
      0x9a: "こ",
      0x9b: "さ",
      0x9c: "し",
      0x9d: "す",
      0x9e: "せ",
      0x9f: "そ",
      0xa6: "ヲ",
      0xa7: "ァ",
      0xa8: "ィ",
      0xa9: "ゥ",
      0xaa: "ェ",
      0xab: "ォ",
      0xac: "ャ",
      0xad: "ュ",
      0xae: "ョ",
      0xaf: "ッ",
      0xb0: "ー",
      0xb1: "ア",
      0xb2: "イ",
      0xb3: "ウ",
      0xb4: "エ",
      0xb5: "オ",
      0xb6: "カ",
      0xb7: "キ",
      0xb8: "ク",
      0xb9: "ケ",
      0xba: "コ",
      0xbb: "サ",
      0xbc: "シ",
      0xbd: "ス",
      0xbe: "セ",
      0xbf: "ソ",
      0xc0: "タ",
      0xc1: "チ",
      0xc2: "ツ",
      0xc3: "テ",
      0xc4: "ト",
      0xc5: "ナ",
      0xc6: "ニ",
      0xc7: "ヌ",
      0xc8: "ネ",
      0xc9: "ノ",
      0xca: "ハ",
      0xcb: "ヒ",
      0xcc: "フ",
      0xcd: "ヘ",
      0xce: "ホ",
      0xcf: "マ",
      0xd0: "ミ",
      0xd1: "ム",
      0xd2: "メ",
      0xd3: "モ",
      0xd4: "ヤ",
      0xd5: "ユ",
      0xd6: "ヨ",
      0xd7: "ラ",
      0xd8: "リ",
      0xd9: "ル",
      0xda: "レ",
      0xdb: "ロ",
      0xdc: "ワ",
      0xdd: "ン",
      0xde: "゛",
      0xdf: "゜",
      0xe0: "た",
      0xe1: "ち",
      0xe2: "つ",
      0xe3: "て",
      0xe4: "と",
      0xe5: "な",
      0xe6: "に",
      0xe7: "ぬ",
      0xe8: "ね",
      0xe9: "の",
      0xea: "は",
      0xeb: "ひ",
      0xec: "ふ",
      0xed: "へ",
      0xee: "ほ",
      0xef: "ま",
      0xf0: "み",
      0xf1: "む",
      0xf2: "め",
      0xf3: "も",
      0xf4: "や",
      0xf5: "ゆ",
      0xf6: "よ",
      0xf7: "ら",
      0xf8: "り",
      0xf9: "る",
      0xfa: "れ",
      0xfb: "ろ",
      0xfc: "わ",
      0xfd: "ん",
    },
    paints: {
      0x0: "Light Blue / Yellow",
      0x1: "Yellow / Purple",
      0x2: "Red / Light Blue",
      0x3: "Blue / Yellow",
      0x4: "Green / Blue",
      0x5: "Blinking Red",
      0x6: "Blinking Rainbow",
    },
    parts: {
      0x0: "Straight",
      0x1: "Wavy",
      0x2: "Bicolor",
      0x3: "Stripped",
      0x4: "Thorns",
      0x5: "Hearts",
      0x6: "Flowers 1",
      0x7: "Chains",
      0x8: "Balls",
      0x9: "Stars 1",
      0xa: "Stars 2",
      0xb: "Snake",
      0xc: "Swords",
      0xd: "Arrow",
      0xe: "Flowers 2",
    },
    ranks: {
      0x0: "-",
      0x1: "Teacher",
      0x2: "Professor",
      0x3: "Master",
    },
    worlds: {
      0x0: "Training",
      0x1: "Grasslands",
      0x2: "Ocean",
      0x3: "Jungle",
      0x4: "Cake Land",
      0x5: "Cave",
      0x6: "Cloud Land",
      0x7: "Star Land",
      0x8: "Ice Land",
      0x9: "Machine Land",
      0xa: "Ghost Castle",
      0xb: "The Last Land",
    },
  },
};

export default template;
