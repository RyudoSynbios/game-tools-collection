import type { GameJson } from "$lib/types";

const template: GameJson = {
  validator: {
    regions: {
      japan: [
        {
          $and: [
            { 0x0: [0x48, 0x55, 0x42, 0x4d] },
            { 0x16: [0x44, 0x52, 0x41, 0x43, 0x55, 0x4c, 0x41, 0x20, 0x58] },
          ],
        },
      ],
    },
    text: "Drag 'n' drop here or click to add a save file.",
    error: "Not a valid save file.",
  },
  items: [
    {
      name: "Checksum",
      offset: 0x12,
      type: "checksum",
      dataType: "uint16",
      control: {
        offsetStart: 0x14,
        offsetEnd: 0xb0,
      },
    },
    {
      length: 0x30,
      type: "container",
      instanceType: "tabs",
      instances: 3,
      enumeration: "Slot %d",
      disableSubinstanceIf: {
        offset: 0x21,
        type: "variable",
        dataType: "uint8",
        value: 0x0,
      },
      items: [
        {
          type: "tabs",
          items: [
            {
              name: "General",
              items: [
                {
                  type: "section",
                  flex: true,
                  items: [
                    {
                      name: "Filename",
                      offset: 0x35,
                      length: 0x8,
                      type: "variable",
                      dataType: "string",
                      letterDataType: "uint8",
                      fallback: 0x20,
                      resource: "letters",
                      test: true,
                    },
                    {
                      name: "Death Counts",
                      offset: 0x3d,
                      type: "variable",
                      dataType: "uint16",
                      binaryCodedDecimal: true,
                    },
                    {
                      name: "Money",
                      offset: 0x3f,
                      type: "variable",
                      dataType: "uint24",
                      binaryCodedDecimal: true,
                    },
                    {
                      id: "completionRate",
                      name: "Completion Rate",
                      offset: 0x2b,
                      type: "variable",
                      dataType: "uint8",
                      disabled: true,
                    },
                  ],
                },
                {
                  type: "section",
                  flex: true,
                  items: [
                    {
                      name: "Rescued Characters",
                      type: "bitflags",
                      flags: [
                        { offset: 0x20, bit: 0, label: "Maria" },
                        { offset: 0x20, bit: 1, label: "Tera" },
                        { offset: 0x20, bit: 2, label: "Iris" },
                        { offset: 0x20, bit: 3, label: "Annette" },
                      ],
                    },
                    {
                      name: "???",
                      offset: 0x44,
                      type: "variable",
                      dataType: "uint8",
                      hidden: true,
                    },
                    {
                      name: "???",
                      offset: 0x45,
                      type: "variable",
                      dataType: "uint8",
                      hidden: true,
                    },
                  ],
                },
              ],
            },
            {
              name: "Levels",
              items: [
                {
                  type: "tabs",
                  vertical: true,
                  items: [
                    {
                      name: "Richter",
                      flex: true,
                      items: [
                        {
                          name: "Unlocked",
                          type: "bitflags",
                          flags: [
                            { offset: 0x21, bit: 0, label: "Prologue Death", separator: true },
                            { offset: 0x21, bit: 2, label: "Stage 1" },
                            { offset: 0x21, bit: 6, label: "Stage 1 Wyvern" },
                            { offset: 0x21, bit: 7, label: "Stage 1' Serpent", separator: true },
                            { offset: 0x22, bit: 0, label: "Stage 2" },
                            { offset: 0x22, bit: 4, label: "Stage 2 Were Wolf", separator: true },
                            { offset: 0x22, bit: 1, label: "Stage 2'" },
                            { offset: 0x22, bit: 5, label: "Stage 2' B.Golem", separator: true },
                            { offset: 0x22, bit: 2, label: "Stage 3" },
                            { offset: 0x22, bit: 6, label: "Stage 3 Minotaurs", separator: true },
                            { offset: 0x22, bit: 3, label: "Stage 3'" },
                            { offset: 0x22, bit: 7, label: "Stage 3' Dogether", separator: true },
                            { offset: 0x23, bit: 0, label: "Stage 4" },
                            { offset: 0x23, bit: 4, label: "Stage 4 Dullahan", separator: true },
                            { offset: 0x23, bit: 1, label: "Stage 4'" },
                            { offset: 0x23, bit: 5, label: "Stage 4' Carmilla", separator: true },
                            { offset: 0x23, bit: 2, label: "Stage 5" },
                            { offset: 0x23, bit: 3, label: "Stage 5'" },
                            { offset: 0x23, bit: 6, label: "Stage 5 Death", separator: true },
                            { offset: 0x24, bit: 0, label: "Stage 6 Shaft", separator: true },
                            { offset: 0x24, bit: 2, label: "Stage 7" },
                            { offset: 0x24, bit: 6, label: "Stage 7 Shaft G.", separator: true },
                            { offset: 0x25, bit: 0, label: "Stage 8" },
                          ],
                        },
                        {
                          name: "Completed",
                          type: "bitflags",
                          flags: [
                            { offset: 0x2b, bit: 0, label: "Prologue Death", separator: true },
                            { offset: 0x2b, bit: 2, label: "Stage 1" },
                            { offset: 0x2b, bit: 6, label: "Stage 1 Wyvern" },
                            { offset: 0x2b, bit: 7, label: "Stage 1' Serpent", separator: true },
                            { offset: 0x2c, bit: 0, label: "Stage 2" },
                            { offset: 0x2c, bit: 4, label: "Stage 2 Were Wolf", separator: true },
                            { offset: 0x2c, bit: 1, label: "Stage 2'" },
                            { offset: 0x2c, bit: 5, label: "Stage 2' B.Golem", separator: true },
                            { offset: 0x2c, bit: 2, label: "Stage 3" },
                            { offset: 0x2c, bit: 6, label: "Stage 3 Minotaurs", separator: true },
                            { offset: 0x2c, bit: 3, label: "Stage 3'" },
                            { offset: 0x2c, bit: 7, label: "Stage 3' Dogether", separator: true },
                            { offset: 0x2d, bit: 0, label: "Stage 4" },
                            { offset: 0x2d, bit: 4, label: "Stage 4 Dullahan", separator: true },
                            { offset: 0x2d, bit: 1, label: "Stage 4'" },
                            { offset: 0x2d, bit: 5, label: "Stage 4' Carmilla", separator: true },
                            { offset: 0x2d, bit: 2, label: "Stage 5" },
                            { offset: 0x2d, bit: 3, label: "Stage 5'" },
                            { offset: 0x2d, bit: 6, label: "Stage 5 Death", separator: true },
                            { offset: 0x2e, bit: 0, label: "Stage 6 Shaft", separator: true },
                            { offset: 0x2e, bit: 2, label: "Stage 7" },
                            { offset: 0x2e, bit: 6, label: "Stage 7 Shaft G.", separator: true },
                            { offset: 0x2f, bit: 0, label: "Stage 8" },
                          ],
                        },
                      ],
                    },
                    {
                      name: "Maria",
                      flex: true,
                      items: [
                        {
                          name: "Unlocked",
                          type: "bitflags",
                          flags: [
                            { offset: 0x26, bit: 0, label: "Prologue Death", separator: true, disabled: true },
                            { offset: 0x26, bit: 2, label: "Stage 1", disabled: true },
                            { offset: 0x26, bit: 6, label: "Stage 1 Wyvern" },
                            { offset: 0x26, bit: 7, label: "Stage 1' Serpent", separator: true },
                            { offset: 0x27, bit: 0, label: "Stage 2" },
                            { offset: 0x27, bit: 4, label: "Stage 2 Were Wolf", separator: true },
                            { offset: 0x27, bit: 1, label: "Stage 2'" },
                            { offset: 0x27, bit: 5, label: "Stage 2' B.Golem", separator: true },
                            { offset: 0x27, bit: 2, label: "Stage 3" },
                            { offset: 0x27, bit: 6, label: "Stage 3 Minotaurs", separator: true },
                            { offset: 0x27, bit: 3, label: "Stage 3'" },
                            { offset: 0x27, bit: 7, label: "Stage 3' Dogether", separator: true },
                            { offset: 0x28, bit: 0, label: "Stage 4" },
                            { offset: 0x28, bit: 4, label: "Stage 4 Dullahan", separator: true },
                            { offset: 0x28, bit: 1, label: "Stage 4'" },
                            { offset: 0x28, bit: 5, label: "Stage 4' Carmilla", separator: true },
                            { offset: 0x28, bit: 2, label: "Stage 5" },
                            { offset: 0x28, bit: 3, label: "Stage 5'" },
                            { offset: 0x28, bit: 6, label: "Stage 5 Death", separator: true },
                            { offset: 0x29, bit: 0, label: "Stage 6 Shaft", separator: true },
                            { offset: 0x29, bit: 2, label: "Stage 7" },
                            { offset: 0x29, bit: 6, label: "Stage 7 Shaft G.", separator: true },
                            { offset: 0x2a, bit: 0, label: "Stage 8" },
                          ],
                        },
                        {
                          name: "Completed",
                          type: "bitflags",
                          flags: [
                            { offset: 0x30, bit: 0, label: "Prologue Death", separator: true, disabled: true },
                            { offset: 0x30, bit: 2, label: "Stage 1" },
                            { offset: 0x30, bit: 6, label: "Stage 1 Wyvern" },
                            { offset: 0x30, bit: 7, label: "Stage 1' Serpent", separator: true },
                            { offset: 0x31, bit: 0, label: "Stage 2" },
                            { offset: 0x31, bit: 4, label: "Stage 2 Were Wolf", separator: true },
                            { offset: 0x31, bit: 1, label: "Stage 2'" },
                            { offset: 0x31, bit: 5, label: "Stage 2' B.Golem", separator: true },
                            { offset: 0x31, bit: 2, label: "Stage 3" },
                            { offset: 0x31, bit: 6, label: "Stage 3 Minotaurs", separator: true },
                            { offset: 0x31, bit: 3, label: "Stage 3'" },
                            { offset: 0x31, bit: 7, label: "Stage 3' Dogether", separator: true },
                            { offset: 0x32, bit: 0, label: "Stage 4" },
                            { offset: 0x32, bit: 4, label: "Stage 4 Dullahan", separator: true },
                            { offset: 0x32, bit: 1, label: "Stage 4'" },
                            { offset: 0x32, bit: 5, label: "Stage 4' Carmilla", separator: true },
                            { offset: 0x32, bit: 2, label: "Stage 5" },
                            { offset: 0x32, bit: 3, label: "Stage 5'" },
                            { offset: 0x32, bit: 6, label: "Stage 5 Death", separator: true },
                            { offset: 0x33, bit: 0, label: "Stage 6 Shaft", separator: true },
                            { offset: 0x33, bit: 2, label: "Stage 7" },
                            { offset: 0x33, bit: 6, label: "Stage 7 Shaft G.", separator: true },
                            { offset: 0x34, bit: 0, label: "Stage 8" },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            {
              name: "Technics",
              items: [
                {
                  name: "Purchased Technics",
                  type: "bitflags",
                  flags: [
                    { offset: 0x42, bit: 0, label: "Prologue Death" },
                    { offset: 0x42, bit: 1, label: "Stage 1 Wyvern" },
                    { offset: 0x42, bit: 2, label: "Stage 1' Serpent" },
                    { offset: 0x42, bit: 3, label: "Stage 2 Were Wolf" },
                    { offset: 0x42, bit: 4, label: "Stage 2' B.Golem" },
                    { offset: 0x42, bit: 5, label: "Stage 3 Minotaurs" },
                    { offset: 0x42, bit: 6, label: "Stage 3' Dogether" },
                    { offset: 0x42, bit: 7, label: "Stage 4 Dullahan" },
                    { offset: 0x43, bit: 0, label: "Stage 4' Carmilla" },
                    { offset: 0x43, bit: 1, label: "Stage 5 Death" },
                    { offset: 0x43, bit: 2, label: "Stage 6 Shaft" },
                    { offset: 0x43, bit: 3, label: "Stage 7 Shaft G." },
                    { offset: 0x43, bit: 4, label: "Stage 8 Dracula" },
                    { offset: 0x43, bit: 5, label: "マリアのひみつ" },
                  ],
                },
              ],
            },
          ],
        },
      ],
    },
  ],
  resources: {
    letters: {
      0x1a: "!",
      0x1d: "&",
      0x1e: "'",
      0x1f: "?",
      0x20: " ",
      0x21: "A",
      0x22: "B",
      0x23: "C",
      0x24: "D",
      0x25: "E",
      0x26: "F",
      0x27: "G",
      0x28: "H",
      0x29: "I",
      0x2a: "J",
      0x2b: "K",
      0x2c: "L",
      0x2d: "M",
      0x2e: "N",
      0x2f: "O",
      0x30: "P",
      0x31: "Q",
      0x32: "R",
      0x33: "S",
      0x34: "T",
      0x35: "U",
      0x36: "V",
      0x37: "W",
      0x38: "X",
      0x39: "Y",
      0x3a: "Z",
      0x3e: ".",
      0x3f: "-",
    },
  },
};

export default template;
